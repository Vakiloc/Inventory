:root {
  --bg: #121210;
  --panel: #1A1918;
  --surface: #232220;
  --border: #3A3836;
  --text: #E8E4DF;
  --text-secondary: #B8B2AA;
  --muted: #8C8580;
  --primary: #3D9B8F;
  --primary-hover: #4DB0A3;
  --on-primary: #FFFFFF;
  --danger: #D45050;
  --danger-text: #F5B0B0;
  --success: #5CA85C;
  --warning: #D4A84D;
  --radius: 12px;
  --radius-sm: 8px;
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow: hidden;
  -webkit-user-select: none;
  user-select: none;
}

/* --- Screens --- */
.screen {
  position: fixed;
  inset: 0;
  display: none;
  flex-direction: column;
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
}
.screen.active { display: flex; }

.screen-center {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 40px 24px;
  min-height: 100vh;
  gap: 16px;
  text-align: center;
}

.app-title { font-size: 28px; font-weight: 700; color: var(--primary); }
.subtitle { font-size: 15px; color: var(--text-secondary); max-width: 300px; }

.divider-text {
  color: var(--muted);
  font-size: 13px;
  padding: 8px 0;
}

/* --- Top bar --- */
.topbar {
  display: flex;
  align-items: center;
  padding: calc(var(--safe-top) + 12px) 16px 12px;
  background: var(--panel);
  border-bottom: 1px solid var(--border);
  gap: 12px;
  position: sticky;
  top: 0;
  z-index: 10;
}
.brand { font-size: 18px; font-weight: 600; }
.grow { flex: 1; }

/* --- Network indicator --- */
.network-indicator {
  font-size: 11px;
  padding: 2px 8px;
  border-radius: 10px;
  font-weight: 600;
}
.network-indicator.online { background: var(--success); color: var(--on-primary); }
.network-indicator.offline { background: var(--danger); color: var(--on-primary); }

/* --- Buttons --- */
.btn {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 10px 16px;
  font-size: 14px;
  cursor: pointer;
  transition: background 150ms ease;
}
.btn:active { background: var(--border); }
.btn.primary { background: var(--primary); color: var(--on-primary); border-color: transparent; }
.btn.primary:active { background: var(--primary-hover); }
.btn.large { padding: 14px 24px; font-size: 16px; width: 100%; max-width: 320px; border-radius: var(--radius); }
.btn.danger { background: var(--danger); color: var(--on-primary); border-color: transparent; }
.btn.danger-text { background: transparent; color: var(--danger); border: none; }
.icon-btn { width: 44px; height: 44px; padding: 0; font-size: 20px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }

/* --- Inputs --- */
.input, .select {
  background: var(--surface);
  color: var(--text);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 12px 14px;
  font-size: 15px;
  width: 100%;
  outline: none;
}
.input:focus, .select:focus { border-color: var(--primary); }
.select { appearance: auto; }

.label {
  font-size: 13px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-top: 14px;
  margin-bottom: 4px;
  display: block;
}

/* --- Search --- */
.search-bar { padding: 12px 16px 0; }
.search-input { border-radius: var(--radius); }

/* --- Filter row --- */
.filter-row {
  display: flex;
  gap: 8px;
  padding: 8px 16px;
}
.filter-select { flex: 1; padding: 8px 10px; font-size: 13px; }

/* --- Items list --- */
.items-list {
  flex: 1;
  overflow-y: auto;
  padding: 0 16px 80px;
  -webkit-overflow-scrolling: touch;
}

.item-card {
  display: flex;
  align-items: center;
  padding: 14px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 8px;
  cursor: pointer;
  transition: background 150ms ease;
  gap: 12px;
}
.item-card:active { background: var(--surface); }

.item-info { flex: 1; min-width: 0; }
.item-name { font-size: 15px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.item-meta { font-size: 12px; color: var(--muted); margin-top: 2px; }
.item-qty {
  font-size: 18px;
  font-weight: 600;
  color: var(--primary);
  min-width: 36px;
  text-align: center;
}

/* --- FAB --- */
.fab {
  position: fixed;
  right: 20px;
  bottom: calc(var(--safe-bottom) + 76px);
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--primary);
  color: var(--on-primary);
  font-size: 28px;
  border: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.4);
  cursor: pointer;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: center;
}
.fab:active { background: var(--primary-hover); }

/* --- Bottom nav --- */
.bottom-nav {
  display: flex;
  background: var(--panel);
  border-top: 1px solid var(--border);
  padding-bottom: var(--safe-bottom);
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 10;
}
.nav-item {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 0;
  background: none;
  border: none;
  color: var(--muted);
  font-size: 10px;
  cursor: pointer;
}
.nav-item.active { color: var(--primary); }
.nav-icon { font-size: 22px; margin-bottom: 2px; }
.nav-label { font-size: 10px; }

/* --- Status bar --- */
.status-bar {
  padding: 6px 16px;
  font-size: 12px;
  color: var(--muted);
  text-align: center;
}
.status-msg { font-size: 13px; color: var(--text-secondary); min-height: 20px; }
.status-msg.error { color: var(--danger); }
.status-msg.success { color: var(--success); }

/* --- Forms --- */
.form-screen {
  padding: 0 16px 100px;
  overflow-y: auto;
  flex: 1;
}
.form-actions {
  padding: 20px 0;
  display: flex;
  gap: 12px;
}
.grid2 { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
.row { display: flex; gap: 8px; align-items: center; }
.row .grow { flex: 1; }

/* --- Scan --- */
.scan-container {
  position: relative;
  background: #000;
}
.scan-container video {
  width: 100%;
  display: block;
}
.scan-result {
  padding: 12px 16px;
  font-size: 14px;
  min-height: 40px;
}
.scan-queue {
  padding: 16px;
  flex: 1;
}
.scan-queue h3 { font-size: 15px; margin-bottom: 8px; }
.badge {
  background: var(--primary);
  color: var(--on-primary);
  border-radius: 10px;
  padding: 1px 8px;
  font-size: 12px;
}

/* --- Settings --- */
.settings-list { padding: 16px; display: flex; flex-direction: column; gap: 12px; }
.setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px;
  background: var(--panel);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}
.setting-label { font-size: 14px; }
.setting-value { font-size: 13px; color: var(--muted); text-align: right; max-width: 200px; overflow: hidden; text-overflow: ellipsis; }
